---
uid: 20240223121928
title: Obsidian相对链接使用相关细节
tags: 
  - 相对链接
description: 详细说明 Obsidian 内相对链接使用的注意事项。
author: ImmortalSty
type: advanced
draft: false
editable: true
modified: 
---

# Obsidian 相对链接使用相关细节

> [!warning] 重要
> 
> 想要在 Obsidian 中使用相对链接的话，一定要把本文看完。
> 
> 所需插件：
> 
> - [[update-relative-links]]；
> - [[obsidian-linter]]。

## 基础设置

想要让 ob 的链接自动补全为相对链接的样式，首先要将设置改为下图红框中的样子：

![[Pasted image 20240223123426.png]]

正式使用时，直接输入 `[[` 即可自动补全。

## Update Relative Links

下载安装好该插件后，不需要设置，它是自动运行的。

Obsidian 的相对链接功能其实并不完整。当 A 文件中链接了 B 文件时，移动 B 文件的位置，链接的地址会自动更新为新的 B 文件地址。但移动 A 文件时，链接却不会自动更新，进而导致该链接失效。

本插件会自动在移动 A 文件时更新链接地址，确保链接的正确和有效。

## Linter

这是个用于自动格式化的插件^[格式化：自动调整 Markdown 语法，使其更加规范。]，需要将设置改为下图红框中的样子：

![[Pasted image 20240223131145.png]]

其中“相对路径修复”下方的三个框分别填上：

1. `(?<=([^\\]|^)\[(([^\]\r\n]|\\\])*[^\\\]\r\n])?(\\\\)*\]\()\/?(?<link>([^\.\\\)\/\:\r\n\s]|\.[^\.\\\)\/\:\r\n\s]|\.\.[^\\\)\/\:\r\n\s]|\\[^\\\/\:\r\n\s])(([^\)\:\r\n\s]|\\\))*[^\\\)\:\r\n\s])?(\\\\)*|\.{1,2})(?=\))`
2. `gm`
3. `./$<link>`

Obsidian 在解析路径时，绝对路径比相对路径优先级要高，要在相对链接的路径前加上 `./` 在能保证链接正确指向对应文件。

举个例子：

```
根目录
├── 文件夹 A
│   ├── 甲.md
│   └── 文件夹 B
│       └── 乙.md
└── 文件夹 B
    └── 乙.md
```

文件夹 A 中有一个名为甲的 Markdown 文件和一个文件夹 B，文件夹 B 中有一个名为乙的 Markdown 文件，同时根目录中还有一个同名的文件夹 B，其中也有一个名为乙的 Markdown 文件。此时，如果 A 中有链接 `[乙](文件夹 B/乙.md)`，这个链接会指向根目录中的乙文件（即 `/文件夹 B/乙.md`），而不是文件夹 A 中的乙文件（即 `/文件夹 A/文件夹 B/乙.md`）。

这是因为 Obsidian 会优先把 `文件夹 B/乙.md` 识别为基于库的绝对路径，而非相对路径。

如果想要让其指向文件夹 A 中的乙文件，则需要把链接改为 `[乙](./文件夹 B/乙.md)`，也就是在链接地址的前方加上 `./`，以确保该链接会被识别为相对路径即可。

但手动的一个个改有点过于麻烦了，所以我写了个正则表达式，利用 Linter 插件，实现“在按 `Ctrl+S` 保存时，自动在所有相对链接地址前加上 `./`。

> [!warning]+ 注意！！！
> 
> 我不能完全确保该正则表达式不会误编辑，因此强烈建议在使用 Git 或其它版本管理、备份工具的前提下使用该正则表达式，否则请尽可能手动添加 `./`。

## 闲言碎语

Obsidian 的相对链接用起来是真的麻烦，我之前整了好半天才把问题搞定，就算是这样也依旧不能保证正则表达式不会误编辑^[天知道那么多插件，会不会有什么特殊语法正好会被这个正则误伤。就算没有特殊语法，代码块中的内容也依然有概率被误伤。]。所以如果感觉太麻烦那就算了吧，用绝对链接其实也不是不行。